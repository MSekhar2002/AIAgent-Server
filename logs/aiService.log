{"level":"debug","message":"Generating MongoDB query Create a user named Saranya with email saru212711@gmail.com, phone +916381476322, role user and department sales","timestamp":"2025-06-05T13:04:51.211Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T13:04:51.268Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T13:04:51.310Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"user\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"name\": \"Saranya\",\n      \"email\": \"saru212711@gmail.com\",\n      \"phone\": \"+916381476322\",\n      \"role\": \"employee\",\n      \"department\": \"sales\",\n      \"createdAt\": \"2025-06-05T00:00:00.000Z\",\n      \"updatedAt\": \"2025-06-05T00:00:00.000Z\"\n    }\n  }\n}","timestamp":"2025-06-05T13:04:54.611Z"}
{"errors":[{"instancePath":"/query","keyword":"required","message":"must have required property 'filter'","params":{"missingProperty":"filter"},"schemaPath":"#/oneOf/0/properties/query/required"},{"instancePath":"","keyword":"required","message":"must have required property 'unclear'","params":{"missingProperty":"unclear"},"schemaPath":"#/oneOf/1/required"},{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":null},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-05T13:04:55.130Z"}
{"level":"debug","message":"Attempt 2 to generate query","timestamp":"2025-06-05T13:04:55.172Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"user\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"name\": \"Saranya\",\n      \"email\": \"saru212711@gmail.com\",\n      \"phone\": \"+916381476322\",\n      \"role\": \"employee\",\n      \"department\": \"sales\"\n    }\n  }\n}","timestamp":"2025-06-05T13:04:57.329Z"}
{"errors":[{"instancePath":"/query","keyword":"required","message":"must have required property 'filter'","params":{"missingProperty":"filter"},"schemaPath":"#/oneOf/0/properties/query/required"},{"instancePath":"","keyword":"required","message":"must have required property 'unclear'","params":{"missingProperty":"unclear"},"schemaPath":"#/oneOf/1/required"},{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":null},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-05T13:04:57.333Z"}
{"level":"debug","message":"Attempt 3 to generate query","timestamp":"2025-06-05T13:04:57.335Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"user\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"name\": \"Saranya\",\n      \"email\": \"saru212711@gmail.com\",\n      \"phone\": \"+916381476322\",\n      \"role\": \"employee\",\n      \"department\": \"sales\"\n    }\n  }\n}","timestamp":"2025-06-05T13:04:59.233Z"}
{"errors":[{"instancePath":"/query","keyword":"required","message":"must have required property 'filter'","params":{"missingProperty":"filter"},"schemaPath":"#/oneOf/0/properties/query/required"},{"instancePath":"","keyword":"required","message":"must have required property 'unclear'","params":{"missingProperty":"unclear"},"schemaPath":"#/oneOf/1/required"},{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":null},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-05T13:04:59.235Z"}
{"level":"error","message":"All query generation attempts failed","timestamp":"2025-06-05T13:04:59.237Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that their request couldnâ€™t be processed due to a query issue and suggest trying again or contacting an admin.","timestamp":"2025-06-05T13:05:08.200Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, it seems like the request to create Saranya's user profile couldnâ€™t be processed due to a query issue. Iâ€™d suggest trying again to ensure all the details are correct. If the issue persists, it might be a good idea to reach out to the admin team for assistance. Let me know how else I can help! ðŸ˜Š","timestamp":"2025-06-05T13:05:09.977Z"}
{"level":"debug","message":"Generating MongoDB query Give me format for creating schedule","timestamp":"2025-06-05T13:12:30.477Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T13:12:30.494Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T13:12:30.498Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"unclear\": true,\n  \"help\": true,\n  \"context\": \"create_schedule\"\n}","timestamp":"2025-06-05T13:12:32.820Z"}
{"level":"info","message":"Valid query generated","parsed":{"context":"create_schedule","help":true,"unclear":true},"timestamp":"2025-06-05T13:12:32.843Z"}
{"level":"debug","message":"Processing with Azure OpenAI Explain to Muni Sekhar how to create a schedule using this information in a friendly, natural way: To create a schedule, please provide:\n- **startTime**: Date (required)\n- **endTime**: Date (required)\n- **assignedEmployees**: Array of User references (required)\n- **location**: Location reference (required)\n- **notes**: String (optional)\n\nExample: \"Create schedule for Aryu at Hyderabad on 2025-06-30 from 9 AM to 5 PM\"\nTry again with these details, or let me know if you need more help!","timestamp":"2025-06-05T13:12:32.853Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Sure, Muni Sekhar! Creating a schedule is straightforward, and Iâ€™ll explain it step-by-step. Hereâ€™s what youâ€™ll need to include:\n\n1. **Start Time**: When the schedule begins (date and time).  \n2. **End Time**: When the schedule ends (date and time).  \n3. **Assigned Employees**: Names or references of the employees who will handle it.  \n4. **Location**: Where the work will take place.  \n5. **Notes**: Any additional details (optional).\n\nHereâ€™s a sample format for you:  \n\n---\n\n**Example**:  \n\"Create a schedule for Saranya and Aryu at Hyderabad on 2025-06-30 from 9 AM to 5 PM. Add a note: 'Client meeting scheduled in Boardroom B.'\"\n\n---\n\nYou can adjust the names, location, and timing based on your needs. If you share the details, Iâ€™d be happy to help you set it up or guide you further! ðŸ˜Š","timestamp":"2025-06-05T13:12:35.663Z"}
{"level":"debug","message":"Generating MongoDB query Create a schedule for Muni Sekhar and Aryu at Hyderabad on 2025-06-30 from 9 AM to 5 PM. Add a note: 'Client meeting scheduled'","timestamp":"2025-06-05T13:14:06.405Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T13:14:30.796Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T13:16:09.367Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"title\": \"Client meeting scheduled\",\n      \"description\": \"Client meeting scheduled\",\n      \"date\": \"2025-06-30T00:00:00.000Z\",\n      \"startTime\": \"2025-06-30T09:00:00.000Z\",\n      \"endTime\": \"2025-06-30T17:00:00.000Z\",\n      \"location\": {\n        \"name\": \"Hyderabad\"\n      },\n      \"assignedEmployees\": [\n        {\n          \"name\": \"Muni Sekhar\"\n        },\n        {\n          \"name\": \"Aryu\"\n        }\n      ],\n      \"createdBy\": \"67efab9372692e5936f97788\"\n    }\n  }\n}","timestamp":"2025-06-05T13:17:29.663Z"}
{"errors":[{"instancePath":"/query","keyword":"required","message":"must have required property 'filter'","params":{"missingProperty":"filter"},"schemaPath":"#/oneOf/0/properties/query/required"},{"instancePath":"","keyword":"required","message":"must have required property 'unclear'","params":{"missingProperty":"unclear"},"schemaPath":"#/oneOf/1/required"},{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":null},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-05T13:43:02.698Z"}
{"level":"debug","message":"Attempt 2 to generate query","timestamp":"2025-06-05T13:43:11.419Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"title\": \"Client meeting scheduled\",\n      \"description\": \"Client meeting scheduled\",\n      \"date\": \"2025-06-30T00:00:00.000Z\",\n      \"startTime\": \"2025-06-30T09:00:00.000Z\",\n      \"endTime\": \"2025-06-30T17:00:00.000Z\",\n      \"location\": null, \t\"assignedEmployees\": [],\n      \"createdBy\": \"67efab9372692e5936f97788\"\n    }\n  }\n}","timestamp":"2025-06-05T13:43:17.386Z"}
{"errors":[{"instancePath":"/query","keyword":"required","message":"must have required property 'filter'","params":{"missingProperty":"filter"},"schemaPath":"#/oneOf/0/properties/query/required"},{"instancePath":"","keyword":"required","message":"must have required property 'unclear'","params":{"missingProperty":"unclear"},"schemaPath":"#/oneOf/1/required"},{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":null},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-05T13:43:17.390Z"}
{"level":"debug","message":"Attempt 3 to generate query","timestamp":"2025-06-05T13:43:21.508Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"title\": \"Client meeting scheduled\",\n      \"description\": \"Client meeting scheduled\",\n      \"date\": \"2025-06-30T00:00:00.000Z\",\n      \"startTime\": \"2025-06-30T09:00:00.000Z\",\n      \"endTime\": \"2025-06-30T17:00:00.000Z\",\n      \"location\": null,  \"assignedEmployees\": [\n        {\n          \"name\": \"Muni Sekhar\",\n          \"email\": \"munisekhar@gmail.com\"\n        },\n        {\n          \"name\": \"Aryu\",\n          \"email\": \"aryu@gmail.com\"\n        }\n      ],\n      \"createdBy\": \"67efab9372692e5936f97788\"\n    }\n  }\n}","timestamp":"2025-06-05T13:43:24.995Z"}
{"errors":[{"instancePath":"/query","keyword":"required","message":"must have required property 'filter'","params":{"missingProperty":"filter"},"schemaPath":"#/oneOf/0/properties/query/required"},{"instancePath":"","keyword":"required","message":"must have required property 'unclear'","params":{"missingProperty":"unclear"},"schemaPath":"#/oneOf/1/required"},{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":null},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-05T13:43:24.997Z"}
{"level":"error","message":"All query generation attempts failed","timestamp":"2025-06-05T13:43:24.999Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that their request couldnâ€™t be processed due to a query issue and suggest trying again or contacting an admin.","timestamp":"2025-06-05T13:43:25.003Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, it seems your request to create the schedule couldnâ€™t be processed due to a query issue. Iâ€™d recommend double-checking the details and trying again. If the issue persists, it might be best to contact the admin team for support. Let me know if you need anything else or further assistance! ðŸ˜Š","timestamp":"2025-06-05T13:43:26.445Z"}
{"level":"debug","message":"Generating MongoDB query Create a schedule for Muni Sekhar and Aryu at Hyderabad on 2025-06-30 from 9 AM to 5 PM. Add a note: 'Client meeting scheduled'","timestamp":"2025-06-05T16:02:31.884Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T16:02:31.887Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T16:03:01.036Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"title\": \"Client meeting scheduled\",\n      \"description\": \"Client meeting scheduled\",\n      \"date\": \"2025-06-30T00:00:00.000Z\",\n      \"startTime\": \"2025-06-30T09:00:00.000Z\",\n      \"endTime\": \"2025-06-30T17:00:00.000Z\",\n      \"location\": null, \t\"assignedEmployees\": [],\n      \"createdBy\": \"67efab9372692e5936f97788\"\n    }\n  }\n}","timestamp":"2025-06-05T16:03:40.408Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"schedule","operation":"write","query":{"data":{"assignedEmployees":[],"createdBy":"67efab9372692e5936f97788","date":"2025-06-30T00:00:00.000Z","description":"Client meeting scheduled","endTime":"2025-06-30T17:00:00.000Z","location":null,"startTime":"2025-06-30T09:00:00.000Z","title":"Client meeting scheduled"}}},"timestamp":"2025-06-05T16:10:13.749Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that their request couldnâ€™t be processed due to an internal error and suggest trying again or contacting an admin.","timestamp":"2025-06-05T16:12:15.837Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, it seems there was an internal error while processing your request to create the schedule. Iâ€™d recommend trying again after a little while. If the issue persists, it might be best to reach out to the admin team for assistance.\n\nLet me know if youâ€™d like me to guide you through the process again or help with anything else. ðŸ˜Š","timestamp":"2025-06-05T16:12:19.147Z"}
{"level":"debug","message":"Generating MongoDB query Create a schedule for Muni Sekhar and Aryu at Hyderabad on 2025-06-30 from 9 AM to 5 PM. Add a note: 'Client meeting scheduled'","timestamp":"2025-06-05T16:44:51.141Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T16:44:51.145Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T16:44:59.910Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"title\": \"Schedule for Muni Sekhar and Aryu\",\n      \"description\": \"Client meeting scheduled\",\n      \"date\": \"2025-06-30T00:00:00.000Z\",\n      \"startTime\": \"2025-06-30T09:00:00.000Z\",\n      \"endTime\": \"2025-06-30T17:00:00.000Z\",\n      \"location\": {\n        \"$lookup\": {\n          \"from\": \"location\",\n          \"localField\": \"name\",\n          \"foreignField\": \"Hyderabad\",\n          \"as\": \"_id\"\n        }\n      },\n      \"assignedEmployees\": [\n        {\n          \"$lookup\": {\n            \"from\": \"user\",\n            \"localField\": \"name\",\n            \"foreignField\": \"Muni Sekhar\",\n            \"as\": \"_id\"\n          }\n        },\n        {\n          \"$lookup\": {\n            \"from\": \"user\",\n            \"localField\": \"name\",\n            \"foreignField\": \"Aryu\",\n            \"as\": \"_id\"\n          }\n        }\n      ],\n      \"createdBy\": \"67efab9372692e5936f97788\",\n      \"status\": \"scheduled\",\n      \"notificationOptions\": {\n        \"sendEmail\": false,\n        \"sendWhatsapp\": false,\n        \"reminderTime\": null\n      }\n    }\n  }\n}","timestamp":"2025-06-05T16:45:14.090Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"schedule","operation":"write","query":{"data":{"assignedEmployees":[{"$lookup":{"as":"_id","foreignField":"Muni Sekhar","from":"user","localField":"name"}},{"$lookup":{"as":"_id","foreignField":"Aryu","from":"user","localField":"name"}}],"createdBy":"67efab9372692e5936f97788","date":"2025-06-30T00:00:00.000Z","description":"Client meeting scheduled","endTime":"2025-06-30T17:00:00.000Z","location":{"$lookup":{"as":"_id","foreignField":"Hyderabad","from":"location","localField":"name"}},"notificationOptions":{"reminderTime":null,"sendEmail":false,"sendWhatsapp":false},"startTime":"2025-06-30T09:00:00.000Z","status":"scheduled","title":"Schedule for Muni Sekhar and Aryu"}}},"timestamp":"2025-06-05T16:47:04.479Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that their request couldnâ€™t be processed due to an internal error and suggest trying again or contacting an admin.","timestamp":"2025-06-05T16:47:04.538Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, I apologize, but it seems your request to create the schedule couldnâ€™t be processed due to an internal error. Iâ€™d recommend trying again shortly. If the issue persists, reaching out to the admin team might help resolve this quickly.\n\nLet me know if youâ€™d like assistance with anything else! ðŸ˜Š","timestamp":"2025-06-05T16:47:06.247Z"}
{"level":"debug","message":"Generating MongoDB query Create a schedule for Muni Sekhar and Aryu at Hyderabad on 2025-06-30 from 9 AM to 5 PM. Add a note: 'Client meeting scheduled'","timestamp":"2025-06-05T16:47:44.858Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T16:47:44.862Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T16:47:49.905Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"title\": \"Schedule for Muni Sekhar and Aryu\",\n      \"description\": \"Client meeting scheduled\",\n      \"date\": \"2025-06-30T00:00:00.000Z\",\n      \"startTime\": \"2025-06-30T09:00:00.000Z\",\n      \"endTime\": \"2025-06-30T17:00:00.000Z\",\n      \"location\": {\n        \"$lookup\": {\n          \"from\": \"location\",\n          \"localField\": \"name\",\n          \"foreignField\": \"Hyderabad\",\n          \"as\": \"_id\"\n        }\n      },\n      \"assignedEmployees\": [\n        {\n          \"$lookup\": {\n            \"from\": \"user\",\n            \"localField\": \"name\",\n            \"foreignField\": \"Muni Sekhar\",\n            \"as\": \"_id\"\n          }\n        },\n        {\n          \"$lookup\": {\n            \"from\": \"user\",\n            \"localField\": \"name\",\n            \"foreignField\": \"Aryu\",\n            \"as\": \"_id\"\n          }\n        }\n      ],\n      \"createdBy\": \"67efab9372692e5936f97788\",\n      \"status\": \"scheduled\",\n      \"notificationOptions\": {\n        \"sendEmail\": false,\n        \"sendWhatsapp\": false,\n        \"reminderTime\": null\n      }\n    }\n  }\n}","timestamp":"2025-06-05T16:47:55.480Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"schedule","operation":"write","query":{"data":{"assignedEmployees":[{"$lookup":{"as":"_id","foreignField":"Muni Sekhar","from":"user","localField":"name"}},{"$lookup":{"as":"_id","foreignField":"Aryu","from":"user","localField":"name"}}],"createdBy":"67efab9372692e5936f97788","date":"2025-06-30T00:00:00.000Z","description":"Client meeting scheduled","endTime":"2025-06-30T17:00:00.000Z","location":{"$lookup":{"as":"_id","foreignField":"Hyderabad","from":"location","localField":"name"}},"notificationOptions":{"reminderTime":null,"sendEmail":false,"sendWhatsapp":false},"startTime":"2025-06-30T09:00:00.000Z","status":"scheduled","title":"Schedule for Muni Sekhar and Aryu"}}},"timestamp":"2025-06-05T16:47:55.535Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that their request couldnâ€™t be processed due to an internal error and suggest trying again or contacting an admin.","timestamp":"2025-06-05T16:47:55.611Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, it seems your request to create the schedule couldnâ€™t be processed due to an internal error. Iâ€™d recommend trying again later, and if the issue persists, reaching out to the admin team should help resolve it quickly.\n\nLet me know if youâ€™d like me to assist with anything else in the meantime! ðŸ˜Š","timestamp":"2025-06-05T16:47:57.005Z"}
{"level":"debug","message":"Generating MongoDB query Create a schedule for Muni Sekhar and Aryu at Hyderabad on 2025-06-30 from 9 AM to 5 PM. Add a note: 'Client meeting scheduled'","timestamp":"2025-06-05T16:48:27.807Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T16:48:27.810Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T16:48:41.128Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"title\": \"Schedule for Muni Sekhar and Aryu\",\n      \"description\": \"Client meeting scheduled\",\n      \"date\": \"2025-06-30T00:00:00.000Z\",\n      \"startTime\": \"2025-06-30T09:00:00.000Z\",\n      \"endTime\": \"2025-06-30T17:00:00.000Z\",\n      \"location\": {\n        \"$lookup\": {\n          \"from\": \"location\",\n          \"localField\": \"name\",\n          \"foreignField\": \"Hyderabad\",\n          \"as\": \"location_id\"\n        }\n      },\n      \"assignedEmployees\": [\n        {\n          \"$lookup\": {\n            \"from\": \"user\",\n            \"localField\": \"name\",\n            \"foreignField\": \"Muni Sekhar\",\n            \"as\": \"user_id\"\n          }\n        },\n        {\n          \"$lookup\": {\n            \"from\": \"user\",\n            \"localField\": \"name\",\n            \"foreignField\": \"Aryu\",\n            \"as\": \"user_id\"\n          }\n        }\n      ],\n      \"createdBy\": \"67efab9372692e5936f97788\",\n      \"status\": \"scheduled\",\n      \"notificationOptions\": {\n        \"sendEmail\": false,\n        \"sendWhatsapp\": false,\n        \"reminderTime\": null\n      }\n    }\n  }\n}","timestamp":"2025-06-05T16:48:46.323Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"schedule","operation":"write","query":{"data":{"assignedEmployees":[{"$lookup":{"as":"user_id","foreignField":"Muni Sekhar","from":"user","localField":"name"}},{"$lookup":{"as":"user_id","foreignField":"Aryu","from":"user","localField":"name"}}],"createdBy":"67efab9372692e5936f97788","date":"2025-06-30T00:00:00.000Z","description":"Client meeting scheduled","endTime":"2025-06-30T17:00:00.000Z","location":{"$lookup":{"as":"location_id","foreignField":"Hyderabad","from":"location","localField":"name"}},"notificationOptions":{"reminderTime":null,"sendEmail":false,"sendWhatsapp":false},"startTime":"2025-06-30T09:00:00.000Z","status":"scheduled","title":"Schedule for Muni Sekhar and Aryu"}}},"timestamp":"2025-06-05T16:52:15.320Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that their request couldnâ€™t be processed due to an internal error and suggest trying again or contacting an admin.","timestamp":"2025-06-05T16:53:36.486Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, it seems your request to create the schedule couldnâ€™t be processed due to an internal error. Iâ€™d recommend trying again in a little while. If the issue continues, contacting the admin team should help resolve it quickly.  \n\nLet me know if youâ€™d like assistance with anything else! ðŸ˜Š","timestamp":"2025-06-05T16:53:39.400Z"}
{"level":"debug","message":"Generating MongoDB query Create a schedule for Muni Sekhar and Aryu at Hyderabad on 2025-06-30 from 9 AM to 5 PM. Add a note: 'Client meeting scheduled'","timestamp":"2025-06-05T17:00:50.547Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T17:00:50.552Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T17:00:52.948Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"title\": \"Schedule for Muni Sekhar and Aryu\",\n      \"description\": \"Client meeting scheduled\",\n      \"date\": \"2025-06-30T00:00:00.000Z\",\n      \"startTime\": \"2025-06-30T09:00:00.000Z\",\n      \"endTime\": \"2025-06-30T17:00:00.000Z\",\n      \"location\": \"resolved_location_id_for_Hyderabad\",\n      \"assignedEmployees\": [\n        \"resolved_user_id_for_Muni_Sekhar\",\n        \"resolved_user_id_for_Aryu\"\n      ],\n      \"createdBy\": \"67efab9372692e5936f97788\",\n      \"status\": \"scheduled\",\n      \"notificationOptions\": {\n        \"sendEmail\": false,\n        \"sendWhatsapp\": false,\n        \"reminderTime\": null\n      }\n    },\n    \"employeeNames\": [\"Muni Sekhar\", \"Aryu\"],\n    \"locationName\": \"Hyderabad\"\n  }\n}","timestamp":"2025-06-05T17:00:57.987Z"}
{"data":{"allowAutoReplacement":false,"assignedEmployees":["67efab9372692e5936f97788","68343994b3eef427de6a7554"],"createdAt":"2025-06-05T17:02:04.615Z","createdBy":"67efab9372692e5936f97788","date":"2025-06-30T00:00:00.000Z","description":"Client meeting scheduled","endTime":"2025-06-30T17:00:00.000Z","endTimeString":"5:00 PM","location":"67f001a8bde04003d16cade3","notificationOptions":{"reminderTime":24,"sendEmail":true,"sendWhatsapp":false},"notificationSent":false,"requireHourTracking":true,"startTime":"2025-06-30T09:00:00.000Z","startTimeString":"9:00 AM","status":"scheduled","title":"Schedule for Muni Sekhar, Aryu","updatedAt":"2025-06-05T17:02:04.615Z"},"level":"info","message":"Schedule query updated with resolved IDs","timestamp":"2025-06-05T17:02:06.762Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"schedule","operation":"write","query":{"data":{"allowAutoReplacement":false,"assignedEmployees":["67efab9372692e5936f97788","68343994b3eef427de6a7554"],"createdAt":"2025-06-05T17:02:04.615Z","createdBy":"67efab9372692e5936f97788","date":"2025-06-30T00:00:00.000Z","description":"Client meeting scheduled","endTime":"2025-06-30T17:00:00.000Z","endTimeString":"5:00 PM","location":"67f001a8bde04003d16cade3","notificationOptions":{"reminderTime":24,"sendEmail":true,"sendWhatsapp":false},"notificationSent":false,"requireHourTracking":true,"startTime":"2025-06-30T09:00:00.000Z","startTimeString":"9:00 AM","status":"scheduled","title":"Schedule for Muni Sekhar, Aryu","updatedAt":"2025-06-05T17:02:04.615Z"},"employeeNames":["Muni Sekhar","Aryu"],"locationName":"Hyderabad"}},"timestamp":"2025-06-05T17:02:11.549Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that a schedule was created successfully with ID 6841cdbc33bc78bb51234e3f and ask if they need anything else.","timestamp":"2025-06-05T17:02:55.968Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, the schedule has been successfully created with the ID **6841cdbc33bc78bb51234e3f**. Itâ€™s set for you and Aryu in Hyderabad on **2025-06-30 from 9 AM to 5 PM** with the note: *\"Client meeting scheduled.\"*\n\nLet me know if thereâ€™s anything else I can assist you with! ðŸ˜Š","timestamp":"2025-06-05T17:02:58.439Z"}
{"level":"debug","message":"Generating MongoDB query list the schedules","timestamp":"2025-06-05T17:03:31.776Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T17:03:31.778Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T17:03:34.742Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {},\n    \"populate\": [\"assignedEmployees\", \"location\", \"createdBy\"]\n  }\n}","timestamp":"2025-06-05T17:03:37.087Z"}
{"errors":[{"instancePath":"/query","keyword":"required","message":"must have required property 'data'","params":{"missingProperty":"data"},"schemaPath":"#/oneOf/0/properties/query/allOf/0/then/required"},{"instancePath":"/query","keyword":"if","message":"must match \"then\" schema","params":{"failingKeyword":"then"},"schemaPath":"#/oneOf/0/properties/query/allOf/0/if"},{"instancePath":"","keyword":"required","message":"must have required property 'unclear'","params":{"missingProperty":"unclear"},"schemaPath":"#/oneOf/1/required"},{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":null},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-05T17:03:39.071Z"}
{"level":"debug","message":"Attempt 2 to generate query","timestamp":"2025-06-05T17:03:40.860Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {},\n    \"populate\": [\"assignedEmployees\", \"location\", \"createdBy\"]\n  }\n}","timestamp":"2025-06-05T17:03:42.322Z"}
{"errors":[{"instancePath":"/query","keyword":"required","message":"must have required property 'data'","params":{"missingProperty":"data"},"schemaPath":"#/oneOf/0/properties/query/allOf/0/then/required"},{"instancePath":"/query","keyword":"if","message":"must match \"then\" schema","params":{"failingKeyword":"then"},"schemaPath":"#/oneOf/0/properties/query/allOf/0/if"},{"instancePath":"","keyword":"required","message":"must have required property 'unclear'","params":{"missingProperty":"unclear"},"schemaPath":"#/oneOf/1/required"},{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":null},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-05T17:03:43.469Z"}
{"level":"debug","message":"Attempt 3 to generate query","timestamp":"2025-06-05T17:03:45.021Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {},\n    \"populate\": [\"assignedEmployees\", \"location\", \"createdBy\"]\n  }\n}","timestamp":"2025-06-05T17:03:46.804Z"}
{"errors":[{"instancePath":"/query","keyword":"required","message":"must have required property 'data'","params":{"missingProperty":"data"},"schemaPath":"#/oneOf/0/properties/query/allOf/0/then/required"},{"instancePath":"/query","keyword":"if","message":"must match \"then\" schema","params":{"failingKeyword":"then"},"schemaPath":"#/oneOf/0/properties/query/allOf/0/if"},{"instancePath":"","keyword":"required","message":"must have required property 'unclear'","params":{"missingProperty":"unclear"},"schemaPath":"#/oneOf/1/required"},{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":null},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-05T17:03:48.277Z"}
{"level":"error","message":"All query generation attempts failed","timestamp":"2025-06-05T17:03:48.292Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that their request couldnâ€™t be processed due to a query issue and suggest trying again or contacting an admin.","timestamp":"2025-06-05T17:03:48.300Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, it seems your request to list the schedules couldnâ€™t be processed due to a query issue. Iâ€™d suggest trying again in a little while. If the problem persists, reaching out to the admin team should help resolve it.\n\nLet me know if thereâ€™s anything else I can do for you! ðŸ˜Š","timestamp":"2025-06-05T17:03:49.682Z"}
{"level":"debug","message":"Generating MongoDB query list all the schedules","timestamp":"2025-06-05T17:04:11.783Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T17:04:11.786Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T17:04:15.775Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {},\n    \"populate\": [\"assignedEmployees\", \"location\", \"createdBy\"]\n  }\n}","timestamp":"2025-06-05T17:04:18.474Z"}
{"errors":[{"instancePath":"/query","keyword":"required","message":"must have required property 'data'","params":{"missingProperty":"data"},"schemaPath":"#/oneOf/0/properties/query/allOf/0/then/required"},{"instancePath":"/query","keyword":"if","message":"must match \"then\" schema","params":{"failingKeyword":"then"},"schemaPath":"#/oneOf/0/properties/query/allOf/0/if"},{"instancePath":"","keyword":"required","message":"must have required property 'unclear'","params":{"missingProperty":"unclear"},"schemaPath":"#/oneOf/1/required"},{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":null},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-05T17:07:38.593Z"}
{"level":"debug","message":"Attempt 2 to generate query","timestamp":"2025-06-05T17:08:58.725Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {},\n    \"populate\": [\"location\", \"assignedEmployees\", \"createdBy\"]\n  }\n}","timestamp":"2025-06-05T17:09:01.763Z"}
{"errors":[{"instancePath":"/query","keyword":"required","message":"must have required property 'data'","params":{"missingProperty":"data"},"schemaPath":"#/oneOf/0/properties/query/allOf/0/then/required"},{"instancePath":"/query","keyword":"if","message":"must match \"then\" schema","params":{"failingKeyword":"then"},"schemaPath":"#/oneOf/0/properties/query/allOf/0/if"},{"instancePath":"","keyword":"required","message":"must have required property 'unclear'","params":{"missingProperty":"unclear"},"schemaPath":"#/oneOf/1/required"},{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":null},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-05T17:14:30.465Z"}
{"level":"debug","message":"Attempt 3 to generate query","timestamp":"2025-06-05T17:14:32.706Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {},\n    \"populate\": [\"assignedEmployees\", \"location\", \"createdBy\"]\n  }\n}","timestamp":"2025-06-05T17:14:35.827Z"}
{"errors":[{"instancePath":"/query","keyword":"required","message":"must have required property 'data'","params":{"missingProperty":"data"},"schemaPath":"#/oneOf/0/properties/query/allOf/0/then/required"},{"instancePath":"/query","keyword":"if","message":"must match \"then\" schema","params":{"failingKeyword":"then"},"schemaPath":"#/oneOf/0/properties/query/allOf/0/if"},{"instancePath":"","keyword":"required","message":"must have required property 'unclear'","params":{"missingProperty":"unclear"},"schemaPath":"#/oneOf/1/required"},{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":null},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-05T17:14:50.181Z"}
{"level":"error","message":"All query generation attempts failed","timestamp":"2025-06-05T17:14:50.186Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that their request couldnâ€™t be processed due to a query issue and suggest trying again or contacting an admin.","timestamp":"2025-06-05T17:14:50.195Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, your request to list all the schedules couldnâ€™t be processed due to a query issue. Iâ€™d recommend trying again shortly, or if the issue persists, it might be best to contact the admin team for assistance. \n\nLet me know if youâ€™d like help with anything else in the meantime! ðŸ˜Š","timestamp":"2025-06-05T17:14:51.417Z"}
{"level":"debug","message":"Generating MongoDB query list all the schedules","timestamp":"2025-06-05T17:18:42.172Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T17:18:42.181Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T17:18:47.432Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {},\n    \"populate\": [\"assignedEmployees\", \"location\", \"createdBy\"]\n  }\n}","timestamp":"2025-06-05T17:18:50.074Z"}
{"level":"debug","message":"Generating MongoDB query list all the schedules","timestamp":"2025-06-05T17:31:28.683Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T17:31:28.688Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T17:31:31.526Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {},\n    \"populate\": [\"assignedEmployees\", \"location\", \"createdBy\"]\n  }\n}","timestamp":"2025-06-05T17:31:33.982Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"schedule","operation":"read","query":{"filter":{},"populate":["assignedEmployees","location","createdBy"]}},"timestamp":"2025-06-05T17:31:39.274Z"}
{"level":"debug","message":"Processing with Azure OpenAI Share these schedule results with Muni Sekhar in a friendly, natural way and ask if they need anything else: Schedule Details:\n\n1. title: testing\ndescription: test to test the test\ndate: 30/5/2025, 12:00:00 am\nstartTime: 28/5/2025, 3:00:00 pm\nendTime: 29/5/2025, 12:00:00 am\nlocation: Hyderabad\nassignedEmployees: Muni Sekhar m, Muni Sekhar, Aryu\nabsences: 68344655e7ab54a6d3ba45ac\nhourTracking: \ncreatedBy: Muni Sekhar\nnotificationSent: true\nstatus: scheduled\nrequireHourTracking: true\nallowAutoReplacement: false\ncreatedAt: 26/5/2025, 11:53:51 am\nupdatedAt: 26/5/2025, 11:53:51 am\n\n2. title: Schedule for Muni Sekhar, Aryu\ndescription: Client meeting scheduled\ndate: 30/6/2025, 5:30:00 am\nstartTime: 30/6/2025, 2:30:00 pm\nendTime: 30/6/2025, 10:30:00 pm\nstartTimeString: 9:00 AM\nendTimeString: 5:00 PM\nlocation: Hyderabad\nassignedEmployees: Muni Sekhar, Aryu\nabsences: \nhourTracking: \ncreatedBy: Muni Sekhar\nnotificationSent: false\nstatus: scheduled\nrequireHourTracking: true\nallowAutoReplacement: false\ncreatedAt: 5/6/2025, 10:32:04 pm\nupdatedAt: 5/6/2025, 10:32:04 pm\n\n","timestamp":"2025-06-05T17:31:41.297Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Hi Muni Sekhar! Here are the schedules currently on record:\n\n1. **Title:** Testing  \n   **Description:** Test to test the test  \n   **Date:** May 30, 2025  \n   **Time:** May 28, 3:00 PM - May 29, 12:00 AM  \n   **Location:** Hyderabad  \n   **Assigned Employees:** You (Muni Sekhar), Aryu  \n   **Status:** Scheduled  \n   **Hour Tracking Required:** Yes  \n   **Notifications Sent:** Yes  \n\n2. **Title:** Schedule for Muni Sekhar, Aryu  \n   **Description:** Client meeting scheduled  \n   **Date:** June 30, 2025  \n   **Time:** 9:00 AM - 5:00 PM  \n   **Location:** Hyderabad  \n   **Assigned Employees:** You (Muni Sekhar), Aryu  \n   **Status:** Scheduled  \n   **Hour Tracking Required:** Yes  \n   **Notifications Sent:** No  \n\nWould you like me to assist you with any changes, send reminders, or clarify anything about these schedules? ðŸ˜Š","timestamp":"2025-06-05T17:31:44.977Z"}
{"level":"debug","message":"Generating MongoDB query list my schedules","timestamp":"2025-06-05T17:34:18.520Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T17:34:18.525Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T17:34:21.611Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {\n      \"assignedEmployees\": \"67efab9372692e5936f97788\"\n    },\n    \"populate\": [\"location\", \"assignedEmployees\"]\n  }\n}","timestamp":"2025-06-05T17:34:24.894Z"}
{"level":"debug","message":"Generating MongoDB query list my schedules","timestamp":"2025-06-05T17:39:56.190Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T17:39:56.198Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T17:39:59.825Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {\n      \"assignedEmployees\": \"67efab9372692e5936f97788\"\n    },\n    \"populate\": [\"location\", \"assignedEmployees\"]\n  }\n}","timestamp":"2025-06-05T17:40:02.463Z"}
{"level":"debug","message":"Generating MongoDB query list all the schedules","timestamp":"2025-06-05T17:42:24.569Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T17:42:24.573Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T17:42:32.604Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {},\n    \"populate\": [\"location\", \"assignedEmployees\", \"createdBy\"]\n  }\n}","timestamp":"2025-06-05T17:42:35.203Z"}
{"level":"debug","message":"Generating MongoDB query list my schedules","timestamp":"2025-06-05T17:50:05.838Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T17:50:05.842Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T17:50:10.124Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {\n      \"assignedEmployees\": \"67efab9372692e5936f97788\"\n    },\n    \"populate\": [\"assignedEmployees\", \"location\", \"createdBy\"]\n  }\n}","timestamp":"2025-06-05T17:50:13.432Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"schedule","operation":"read","query":{"filter":{"assignedEmployees":"67efab9372692e5936f97788"},"populate":["assignedEmployees","location","createdBy"]}},"timestamp":"2025-06-05T17:50:25.760Z"}
{"level":"debug","message":"Processing with Azure OpenAI Share these schedule results with Muni Sekhar in a friendly, natural way and ask if they need anything else: Schedule Details:\n\n1. title: testing\ndescription: test to test the test\ndate: 30/5/2025, 12:00:00 am\nstartTime: 28/5/2025, 3:00:00 pm\nendTime: 29/5/2025, 12:00:00 am\nlocation: Hyderabad\nassignedEmployees: Muni Sekhar m, Muni Sekhar, Aryu\nabsences: 68344655e7ab54a6d3ba45ac\nhourTracking: \ncreatedBy: Muni Sekhar\nnotificationSent: true\nstatus: scheduled\nrequireHourTracking: true\nallowAutoReplacement: false\ncreatedAt: 26/5/2025, 11:53:51 am\nupdatedAt: 26/5/2025, 11:53:51 am\n\n2. title: Schedule for Muni Sekhar, Aryu\ndescription: Client meeting scheduled\ndate: 30/6/2025, 5:30:00 am\nstartTime: 30/6/2025, 2:30:00 pm\nendTime: 30/6/2025, 10:30:00 pm\nstartTimeString: 9:00 AM\nendTimeString: 5:00 PM\nlocation: Hyderabad\nassignedEmployees: Muni Sekhar, Aryu\nabsences: \nhourTracking: \ncreatedBy: Muni Sekhar\nnotificationSent: false\nstatus: scheduled\nrequireHourTracking: true\nallowAutoReplacement: false\ncreatedAt: 5/6/2025, 10:32:04 pm\nupdatedAt: 5/6/2025, 10:32:04 pm\n\n","timestamp":"2025-06-05T17:50:29.054Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Hi Muni Sekhar! Hereâ€™s a friendly overview of your schedules:\n\n### Schedule 1: **Testing**  \n- **Description:** Test to test the test  \n- **Date:** May 30, 2025  \n- **Time:** May 28, 3:00 PM â€“ May 29, 12:00 AM  \n- **Location:** Hyderabad  \n- **Assigned Employees:** You, Aryu  \n- **Status:** Scheduled  \n- **Hour Tracking:** Required  \n- **Notifications:** Sent  \n\n### Schedule 2: **Client Meeting**  \n- **Description:** Client meeting scheduled  \n- **Date:** June 30, 2025  \n- **Time:** 9:00 AM â€“ 5:00 PM  \n- **Location:** Hyderabad  \n- **Assigned Employees:** You, Aryu  \n- **Status:** Scheduled  \n- **Hour Tracking:** Required  \n- **Notifications:** Not Sent  \n\nWould you like help updating any details, sending reminders, or anything else? ðŸ˜Š","timestamp":"2025-06-05T17:50:34.025Z"}
{"level":"debug","message":"Generating MongoDB query Create a schedule for Muni Sekhar at Hyderabad on 2025-06-16 from 9 AM to 3 PM. Add a note: 'Client meeting scheduled'","timestamp":"2025-06-05T17:51:19.786Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T17:51:19.838Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T17:51:21.874Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"title\": \"Client meeting scheduled\",\n      \"description\": \"Client meeting scheduled\",\n      \"date\": \"2025-06-16T00:00:00.000Z\",\n      \"startTime\": \"2025-06-16T09:00:00.000Z\",\n      \"endTime\": \"2025-06-16T15:00:00.000Z\",\n      \"location\": \"Hyderabad\",\n      \"assignedEmployees\": [\"67efab9372692e5936f97788\"],\n      \"createdBy\": \"67efab9372692e5936f97788\",\n      \"status\": \"scheduled\",\n      \"notificationOptions\": {\n        \"sendEmail\": false,\n        \"sendWhatsapp\": false,\n        \"reminderTime\": null\n      },\n      \"requireHourTracking\": false,\n      \"allowAutoReplacement\": false\n    },\n    \"employeeNames\": [\"Muni Sekhar\"],\n    \"locationName\": \"Hyderabad\"\n  }\n}","timestamp":"2025-06-05T17:51:26.706Z"}
{"data":{"allowAutoReplacement":false,"assignedEmployees":["67efab9372692e5936f97788"],"createdAt":"2025-06-05T17:51:29.411Z","createdBy":"67efab9372692e5936f97788","date":"2025-06-16T00:00:00.000Z","description":"Client meeting scheduled","endTime":"2025-06-16T17:00:00.000Z","endTimeString":"5:00 PM","location":"67f001a8bde04003d16cade3","notificationOptions":{"reminderTime":24,"sendEmail":true,"sendWhatsapp":false},"notificationSent":false,"requireHourTracking":true,"startTime":"2025-06-16T09:00:00.000Z","startTimeString":"9:00 AM","status":"scheduled","title":"Schedule for Muni Sekhar","updatedAt":"2025-06-05T17:51:29.411Z"},"level":"info","message":"Schedule query updated with resolved IDs","timestamp":"2025-06-05T17:51:29.411Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"schedule","operation":"write","query":{"data":{"allowAutoReplacement":false,"assignedEmployees":["67efab9372692e5936f97788"],"createdAt":"2025-06-05T17:51:29.411Z","createdBy":"67efab9372692e5936f97788","date":"2025-06-16T00:00:00.000Z","description":"Client meeting scheduled","endTime":"2025-06-16T17:00:00.000Z","endTimeString":"5:00 PM","location":"67f001a8bde04003d16cade3","notificationOptions":{"reminderTime":24,"sendEmail":true,"sendWhatsapp":false},"notificationSent":false,"requireHourTracking":true,"startTime":"2025-06-16T09:00:00.000Z","startTimeString":"9:00 AM","status":"scheduled","title":"Schedule for Muni Sekhar","updatedAt":"2025-06-05T17:51:29.411Z"},"employeeNames":["Muni Sekhar"],"locationName":"Hyderabad"}},"timestamp":"2025-06-05T17:51:29.429Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that a schedule was created successfully with ID 6841d929aad38ee5db831d47 and ask if they need anything else.","timestamp":"2025-06-05T17:51:38.091Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Hi Muni Sekhar! A schedule has been successfully created for you:\n\n### Schedule Details:  \n- **ID:** 6841d929aad38ee5db831d47  \n- **Date:** June 16, 2025  \n- **Time:** 9:00 AM â€“ 3:00 PM  \n- **Location:** Hyderabad  \n- **Note:** Client meeting scheduled  \n\nLet me know if youâ€™d like any changes or need help with something else! ðŸ˜Š","timestamp":"2025-06-05T17:51:40.339Z"}
{"level":"debug","message":"Generating MongoDB query my schedules","timestamp":"2025-06-05T17:52:10.355Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T17:52:10.501Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T17:52:14.347Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {\n      \"assignedEmployees\": \"67efab9372692e5936f97788\"\n    },\n    \"populate\": [\"location\", \"assignedEmployees\", \"createdBy\"]\n  }\n}","timestamp":"2025-06-05T17:52:16.957Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"schedule","operation":"read","query":{"filter":{"assignedEmployees":"67efab9372692e5936f97788"},"populate":["location","assignedEmployees","createdBy"]}},"timestamp":"2025-06-05T17:52:24.590Z"}
{"level":"debug","message":"Processing with Azure OpenAI Share these schedule results with Muni Sekhar in a friendly, natural way and ask if they need anything else: Schedule Details:\n\n1. title: testing\ndescription: test to test the test\ndate: 30/5/2025, 12:00:00 am\nstartTime: 28/5/2025, 3:00:00 pm\nendTime: 29/5/2025, 12:00:00 am\nlocation: Hyderabad\nassignedEmployees: Muni Sekhar m, Muni Sekhar, Aryu\nabsences: 68344655e7ab54a6d3ba45ac\nhourTracking: \ncreatedBy: Muni Sekhar\nnotificationSent: true\nstatus: scheduled\nrequireHourTracking: true\nallowAutoReplacement: false\ncreatedAt: 26/5/2025, 11:53:51 am\nupdatedAt: 26/5/2025, 11:53:51 am\n\n2. title: Schedule for Muni Sekhar, Aryu\ndescription: Client meeting scheduled\ndate: 30/6/2025, 5:30:00 am\nstartTime: 30/6/2025, 2:30:00 pm\nendTime: 30/6/2025, 10:30:00 pm\nstartTimeString: 9:00 AM\nendTimeString: 5:00 PM\nlocation: Hyderabad\nassignedEmployees: Muni Sekhar, Aryu\nabsences: \nhourTracking: \ncreatedBy: Muni Sekhar\nnotificationSent: false\nstatus: scheduled\nrequireHourTracking: true\nallowAutoReplacement: false\ncreatedAt: 5/6/2025, 10:32:04 pm\nupdatedAt: 5/6/2025, 10:32:04 pm\n\n3. title: Schedule for Muni Sekhar\ndescription: Client meeting scheduled\ndate: 16/6/2025, 5:30:00 am\nstartTime: 16/6/2025, 2:30:00 pm\nendTime: 16/6/2025, 10:30:00 pm\nstartTimeString: 9:00 AM\nendTimeString: 5:00 PM\nlocation: Hyderabad\nassignedEmployees: Muni Sekhar\nabsences: \nhourTracking: \ncreatedBy: Muni Sekhar\nnotificationSent: false\nstatus: scheduled\nrequireHourTracking: true\nallowAutoReplacement: false\ncreatedAt: 5/6/2025, 11:21:29 pm\nupdatedAt: 5/6/2025, 11:21:29 pm\n\n","timestamp":"2025-06-05T17:52:27.289Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Hi Muni Sekhar! Hereâ€™s a friendly summary of your upcoming schedules:\n\n---\n\n### **1. Testing**\n- **Description:** Test to test the test  \n- **Date:** May 30, 2025  \n- **Time:** May 28, 3:00 PM â€“ May 29, 12:00 AM  \n- **Location:** Hyderabad  \n- **Assigned Employees:** You, Aryu  \n- **Status:** Scheduled  \n- **Notifications:** Sent  \n- **Hour Tracking:** Required  \n\n---\n\n### **2. Client Meeting**\n- **Description:** Client meeting scheduled  \n- **Date:** June 30, 2025  \n- **Time:** 9:00 AM â€“ 5:00 PM  \n- **Location:** Hyderabad  \n- **Assigned Employees:** You, Aryu  \n- **Status:** Scheduled  \n- **Notifications:** Not Sent  \n- **Hour Tracking:** Required  \n\n---\n\n### **3. Client Meeting**\n- **Description:** Client meeting scheduled  \n- **Date:** June 16, 2025  \n- **Time:** 9:00 AM â€“ 3:00 PM  \n- **Location:** Hyderabad  \n- **Assigned Employees:** You  \n- **Status:** Scheduled  \n- **Notifications:** Not Sent  \n- **Hour Tracking:** Required  \n\n---\n\nLet me know if any updates are neededâ€”whether itâ€™s sending reminders, editing details, or adding new schedules. ðŸ˜Š","timestamp":"2025-06-05T17:52:31.511Z"}
{"level":"debug","message":"Generating MongoDB query todays schedules","timestamp":"2025-06-05T17:52:54.723Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T17:52:54.726Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T17:52:58.204Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"schedule\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {\n      \"date\": {\n        \"$gte\": \"2025-06-05T00:00:00.000Z\",\n        \"$lt\": \"2025-06-06T00:00:00.000Z\"\n      }\n    }\n  }\n}","timestamp":"2025-06-05T17:53:01.545Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"schedule","operation":"read","query":{"filter":{"date":{"$gte":"2025-06-05T00:00:00.000Z","$lt":"2025-06-06T00:00:00.000Z"}}}},"timestamp":"2025-06-05T17:53:05.677Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that no schedule records were found and ask if they want to try a different query.","timestamp":"2025-06-05T17:53:07.503Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Hi Muni Sekhar! I couldnâ€™t find any schedules for today. Would you like to check for a different date or perhaps review your upcoming schedules? Let me know how I can help! ðŸ˜Š","timestamp":"2025-06-05T17:53:10.218Z"}
{"level":"debug","message":"Generating MongoDB query i want to createa user give the format","timestamp":"2025-06-05T17:55:44.300Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T17:55:44.307Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T17:55:46.118Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"unclear\": true,\n  \"help\": true,\n  \"context\": \"create_user\"\n}","timestamp":"2025-06-05T17:55:48.439Z"}
{"level":"info","message":"Valid query generated","parsed":{"context":"create_user","help":true,"unclear":true},"timestamp":"2025-06-05T17:56:15.425Z"}
{"level":"debug","message":"Processing with Azure OpenAI Explain to Muni Sekhar how to create a user using this information in a friendly, natural way: To create a user, please provide:\n- **name**: String (required)\n- **email**: String (required)\n- **password**: String (required)\n- **phone**: String (required)\n- **role**: String (one of: admin, user) (required)\n- **department**: String (optional)\n- **position**: String (optional)\n- **hourTrackingEnabled**: Boolean (optional)\n\nExample: \"Create user named Priya Sharma with email priya@example.com, phone +919876543210, role user, department Sales,\"\nTry again with these details, or let me know if you need more help!","timestamp":"2025-06-05T17:56:15.431Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Got it, Muni Sekhar! Hereâ€™s the format you can use to create a new user. Just provide the details as shown below:\n\n---\n\n### **Required Information**\n1. **Name**: The full name of the user (e.g., Priya Sharma).  \n2. **Email**: A valid email address (e.g., priya@example.com).  \n3. **Password**: A secure password for the account.  \n4. **Phone**: A contact number with country code (e.g., +919876543210).  \n5. **Role**: Specify one of the two optionsâ€”**admin** or **user**.\n\n---\n\n### **Optional Information**\n6. **Department**: The department they belong to (e.g., Sales, HR, Engineering).  \n7. **Position**: Their job title or designation (e.g., Manager, Software Engineer).  \n8. **Hour Tracking Enabled**: Specify whether their working hours need to be tracked (Yes/No).\n\n---\n\n### **Example**  \n\"Create a user named Priya Sharma with email priya@example.com, phone +919876543210, role user, department Sales, position Manager, and enable hour tracking.\"\n\n---\n\nFeel free to share the details, and Iâ€™ll guide you through the next steps! ðŸ˜Š","timestamp":"2025-06-05T17:56:18.774Z"}
{"level":"debug","message":"Generating MongoDB query give all absence request","timestamp":"2025-06-05T18:09:22.045Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T18:09:22.049Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:09:23.240Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"absence\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {},\n    \"populate\": [\"user\", \"approvedBy\"]\n  }\n}","timestamp":"2025-06-05T18:09:25.775Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"absence","operation":"read","query":{"filter":{},"populate":["user","approvedBy"]}},"timestamp":"2025-06-05T18:09:28.360Z"}
{"level":"debug","message":"Processing with Azure OpenAI Share these absence results with Muni Sekhar in a friendly, natural way and ask if they need anything else: Absence Details:\n\n1. user: Aryu\nstartDate: 26/5/2025, 12:00:00 am\nendDate: 26/5/2025, 12:00:00 am\nreason: fever\ntype: sick\nstatus: pending\nreplacementNeeded: true\nreplacementAssigned: false\nnotes: sdfghjk\nnotificationSent: false\ncreatedAt: 26/5/2025, 4:15:41 pm\nupdatedAt: 30/5/2025, 9:07:54 pm\n\n","timestamp":"2025-06-05T18:09:30.665Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Hi Muni Sekhar! Here's the absence request I found for you:\n\n- **User**: Aryu  \n- **Start Date**: May 26, 2025  \n- **End Date**: May 26, 2025  \n- **Reason**: Fever  \n- **Type**: Sick Leave  \n- **Status**: Pending  \n- **Replacement Needed**: Yes  \n- **Replacement Assigned**: No  \n- **Notes**: sdfghjk  \n- **Notification Sent**: No  \n\nIt seems this request is still awaiting approval, and no replacement has been assigned yet. Anything specific you'd like to do with this request, or do you want me to check for more details? ðŸ˜Š","timestamp":"2025-06-05T18:09:33.639Z"}
{"level":"debug","message":"Generating MongoDB query aprove Aryu's absence request","timestamp":"2025-06-05T18:09:59.408Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T18:09:59.416Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:10:08.537Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"absence\",\n  \"operation\": \"update\",\n  \"query\": {\n    \"filter\": {\n      \"user\": \"67efab9372692e5936f97788\",\n      \"status\": \"pending\"\n    },\n    \"update\": {\n      \"$set\": {\n        \"status\": \"approved\",\n        \"approvedBy\": \"67efab9372692e5936f97788\",\n        \"updatedAt\": \"2025-06-05T00:00:00.000Z\"\n      }\n    },\n    \"populate\": [\"user\", \"approvedBy\"]\n  }\n}","timestamp":"2025-06-05T18:10:11.794Z"}
{"level":"debug","message":"Using name-based or user-based filter","timestamp":"2025-06-05T18:10:25.998Z"}
{"level":"info","message":"Valid absence update query generated","parsed":{"model":"absence","operation":"update","query":{"filter":{"status":"pending","user":"67efab9372692e5936f97788"},"populate":["user","approvedBy"],"update":{"$set":{"approvedBy":"67efab9372692e5936f97788","status":"approved","updatedAt":"2025-06-05T18:10:25.999Z"}}}},"timestamp":"2025-06-05T18:10:25.999Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"absence","operation":"update","query":{"filter":{"status":"pending","user":"67efab9372692e5936f97788"},"populate":["user","approvedBy"],"update":{"$set":{"approvedBy":"67efab9372692e5936f97788","status":"approved","updatedAt":"2025-06-05T18:10:25.999Z"}}}},"timestamp":"2025-06-05T18:10:26.000Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that no absence record was found to update and ask if they want to try again.","timestamp":"2025-06-05T18:10:53.774Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, it seems thereâ€™s no absence record for Aryu that can be updated or approved at the moment. Would you like to double-check the request details, or should I assist you with something else? Let me know, and weâ€™ll get it sorted! ðŸ˜Š","timestamp":"2025-06-05T18:10:56.055Z"}
{"level":"debug","message":"Generating MongoDB query yes show me that","timestamp":"2025-06-05T18:11:19.214Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T18:11:19.217Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:11:20.843Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"absence\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {\n      \"user\": \"67efab9372692e5936f97788\",\n      \"status\": \"pending\"\n    },\n    \"populate\": [\"user\", \"approvedBy\"]\n  }\n}","timestamp":"2025-06-05T18:11:23.406Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"absence","operation":"read","query":{"filter":{"status":"pending","user":"67efab9372692e5936f97788"},"populate":["user","approvedBy"]}},"timestamp":"2025-06-05T18:11:25.281Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that no absence records were found and ask if they want to try a different query.","timestamp":"2025-06-05T18:11:28.646Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, I couldnâ€™t find any absence records for Aryu at the moment. Could it be that the request was already addressed or withdrawn? Would you like me to assist you with a different query or help you look into something else? Let me know! ðŸ˜Š","timestamp":"2025-06-05T18:11:30.787Z"}
{"level":"debug","message":"Generating MongoDB query send message to Aryu about tomorrow holiday","timestamp":"2025-06-05T18:12:36.146Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T18:12:36.148Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:12:38.718Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"conversation\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"user\": \"67efab9372692e5936f97788\",\n      \"platform\": \"web\",\n      \"messages\": [\n        {\n          \"sender\": \"system\",\n          \"content\": \"Tomorrow is a holiday.\"\n        }\n      ],\n      \"active\": true,\n      \"createdAt\": \"2025-06-05T00:00:00.000Z\",\n      \"updatedAt\": \"2025-06-05T00:00:00.000Z\"\n    }\n  }\n}","timestamp":"2025-06-05T18:12:42.027Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is holiday","timestamp":"2025-06-05T18:15:46.576Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T18:15:46.585Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:15:48.948Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"conversation\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"user\": \"67efab9372692e5936f97788\",\n      \"platform\": \"web\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Notify Aryu about tomorrow is holiday\"\n        },\n        {\n          \"role\": \"assistant\",\n          \"content\": \"Muni Sekhar, I couldnâ€™t find any absence records for Aryu at the moment. Could it be that the request was already addressed or withdrawn? Would you like me to assist you with a different query or help you look into something else? Let me know! ðŸ˜Š\"\n        }\n      ],\n      \"context\": {\n        \"intent\": \"send_announcement\",\n        \"parameters\": {\n          \"toAll\": false,\n          \"targetUser\": \"Aryu\",\n          \"message\": \"Tomorrow is a holiday\"\n        }\n      },\n      \"active\": true,\n      \"lastActivity\": \"2025-06-05T00:00:00.000Z\",\n      \"createdAt\": \"2025-06-05T00:00:00.000Z\",\n      \"updatedAt\": \"2025-06-05T00:00:00.000Z\"\n    }\n  }\n}","timestamp":"2025-06-05T18:15:53.774Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"conversation","operation":"write","query":{"data":{"active":true,"context":{"intent":"send_announcement","parameters":{"message":"Tomorrow is a holiday","targetUser":"Aryu","toAll":false}},"createdAt":"2025-06-05T00:00:00.000Z","lastActivity":"2025-06-05T00:00:00.000Z","messages":[{"content":"Notify Aryu about tomorrow is holiday","role":"system"},{"content":"Muni Sekhar, I couldnâ€™t find any absence records for Aryu at the moment. Could it be that the request was already addressed or withdrawn? Would you like me to assist you with a different query or help you look into something else? Let me know! ðŸ˜Š","role":"assistant"}],"platform":"web","updatedAt":"2025-06-05T00:00:00.000Z","user":"67efab9372692e5936f97788"}}},"timestamp":"2025-06-05T18:16:19.725Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that their request couldnâ€™t be processed due to an internal error and suggest trying again or contacting an admin.","timestamp":"2025-06-05T18:16:49.876Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, it seems I couldnâ€™t process your request to notify Aryu about tomorrowâ€™s holiday due to an internal error. Could you try again in a moment? Alternatively, I suggest reaching out to the admin if the issue persists. Let me know if youâ€™d like further assistance! ðŸ˜Š","timestamp":"2025-06-05T18:16:52.606Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is holiday","timestamp":"2025-06-05T18:21:02.813Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T18:21:02.823Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:21:05.798Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"conversation\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"user\": \"67efab9372692e5936f97788\",\n      \"platform\": \"web\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Notify Aryu about tomorrow is holiday\"\n        }\n      ],\n      \"context\": {\n        \"intent\": \"send_announcement\",\n        \"parameters\": {\n          \"toAll\": false,\n          \"targetUser\": \"Aryu\",\n          \"message\": \"Tomorrow is a holiday\"\n        }\n      },\n      \"active\": true,\n      \"lastActivity\": \"2025-06-05T00:00:00.000Z\",\n      \"createdAt\": \"2025-06-05T00:00:00.000Z\",\n      \"updatedAt\": \"2025-06-05T00:00:00.000Z\"\n    }\n  },\n  \"Intent\": \"send_announcement\"\n}","timestamp":"2025-06-05T18:21:10.807Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is holiday","timestamp":"2025-06-05T18:22:59.887Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T18:22:59.892Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:23:01.604Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"user\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {\n      \"name\": { \"$regex\": \"^Aryu$\", \"$options\": \"i\" }\n    }\n  },\n  \"intent\": \"send_announcement\",\n  \"parameters\": {\n    \"toAll\": false,\n    \"targetUser\": \"Aryu\",\n    \"message\": \"Tomorrow is holiday\"\n  }\n}","timestamp":"2025-06-05T18:23:04.345Z"}
{"level":"info","message":"Announcement intent detected","parameters":{"message":"Tomorrow is holiday","targetUser":"Aryu","toAll":false},"timestamp":"2025-06-05T18:23:10.144Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is holiday","timestamp":"2025-06-05T18:23:32.397Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T18:23:32.400Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:23:43.878Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"user\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {\n      \"name\": { \"$regex\": \"^Aryu$\", \"$options\": \"i\" }\n    }\n  },\n  \"intent\": \"send_announcement\",\n  \"parameters\": {\n    \"toAll\": false,\n    \"targetUser\": \"Aryu\",\n    \"message\": \"Tomorrow is holiday\"\n  }\n}","timestamp":"2025-06-05T18:23:47.105Z"}
{"level":"info","message":"Announcement intent detected","parameters":{"message":"Tomorrow is holiday","targetUser":"Aryu","toAll":false},"timestamp":"2025-06-05T18:23:50.133Z"}
{"level":"debug","message":"Generating MongoDB query i want to create a location tell me what need to be give as input","timestamp":"2025-06-05T18:27:38.678Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T18:27:38.687Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:27:40.191Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"unclear\": true,\n  \"help\": true,\n  \"context\": \"create_location\"\n}","timestamp":"2025-06-05T18:27:42.560Z"}
{"level":"info","message":"Valid query generated","parsed":{"context":"create_location","help":true,"unclear":true},"timestamp":"2025-06-05T18:27:44.582Z"}
{"level":"debug","message":"Processing with Azure OpenAI Explain to Muni Sekhar how to create a location using this information in a friendly, natural way: To create a location, please provide:\n- **name**: String (required)\n- **address**: String (required)\n- **city**: String (required)\n- **state**: String (optional)\n- **zip**: String (optional)\n\nExample: \"Create location named Bangalore Office at 123 MG Road, Bangalore\"\nTry again with these details, or let me know if you need more help!","timestamp":"2025-06-05T18:27:44.593Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Sure, Muni Sekhar! To create a location, you'll need to provide a few details. Here's what youâ€™ll need:\n\n- **Name**: A name for the location (required). For example, \"Bangalore Office.\"\n- **Address**: The full address (required). Something like \"123 MG Road.\"\n- **City**: The city where the location is (required). For example, \"Bangalore.\"\n- **State**: The state (optional), like \"Karnataka.\"\n- **Zip**: The postal code (optional), such as \"560001.\"\n\nFor example, you can say: \"Create a location named Bangalore Office at 123 MG Road, Bangalore.\"\n\nIf youâ€™re ready, just share those details, and I can guide you further! Let me know if you need help with anything else. ðŸ˜Š","timestamp":"2025-06-05T18:27:47.004Z"}
{"level":"debug","message":"Generating MongoDB query Create a location named Bangalore Office at 123 MG Road, Bangalore","timestamp":"2025-06-05T18:28:12.584Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T18:28:12.588Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:28:23.139Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"location\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"name\": \"Bangalore Office\",\n      \"address\": \"123 MG Road\",\n      \"city\": \"Bangalore\",\n      \"state\": null,\n      \"zipCode\": null,\n      \"country\": null,\n      \"coordinates\": {\n        \"latitude\": null,\n        \"longitude\": null\n      },\n      \"description\": null,\n      \"createdBy\": \"67efab9372692e5936f97788\",\n      \"active\": true\n    }\n  }\n}","timestamp":"2025-06-05T18:28:26.680Z"}
{"level":"debug","message":"Generating MongoDB query Create a location named Bangalore Office at 123 MG Road, Bangalore, Karnataka India, 560001 12.974244596146335, 77.61247595189252","timestamp":"2025-06-05T18:32:05.460Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T18:32:05.468Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:32:12.418Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"location\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"name\": \"Bangalore Office\",\n      \"address\": \"123 MG Road\",\n      \"city\": \"Bangalore\",\n      \"state\": \"Karnataka\",\n      \"zipCode\": \"560001\",\n      \"country\": \"India\",\n      \"coordinates\": {\n        \"latitude\": 12.974244596146335,\n        \"longitude\": 77.61247595189252\n      },\n      \"createdBy\": \"67efab9372692e5936f97788\"\n    }\n  }\n}","timestamp":"2025-06-05T18:32:16.200Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"location","operation":"write","query":{"data":{"address":"123 MG Road","city":"Bangalore","coordinates":{"latitude":12.974244596146335,"longitude":77.61247595189252},"country":"India","createdBy":"67efab9372692e5936f97788","name":"Bangalore Office","state":"Karnataka","zipCode":"560001"}}},"timestamp":"2025-06-05T18:32:44.573Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that a location was created successfully with ID 6841e2d4360ee1d00d55d90d and ask if they need anything else.","timestamp":"2025-06-05T18:32:53.050Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Great news, Muni Sekhar! The location \"Bangalore Office\" at 123 MG Road, Bangalore, Karnataka, India, 560001 (coordinates: 12.974244596146335, 77.61247595189252) has been successfully created with the ID **6841e2d4360ee1d00d55d90d**.\n\nDo you need help with anything else, like assigning employees to this location or creating another one? ðŸ˜Š","timestamp":"2025-06-05T18:32:55.835Z"}
{"level":"debug","message":"Generating MongoDB query get all locations","timestamp":"2025-06-05T18:33:15.697Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T18:33:15.700Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:33:17.501Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"location\",\n  \"operation\": \"read\",\n  \"query\": {\n    \"filter\": {},\n    \"populate\": []\n  }\n}","timestamp":"2025-06-05T18:33:20.507Z"}
{"level":"info","message":"Valid query generated","parsed":{"model":"location","operation":"read","query":{"filter":{},"populate":[]}},"timestamp":"2025-06-05T18:33:23.125Z"}
{"level":"debug","message":"Processing with Azure OpenAI Share these location results with Muni Sekhar in a friendly, natural way and ask if they need anything else: Location Details:\n\n1. name: Hyderabad\naddress: PHASE-2, N-Heights, Plot No 38, Siddiq Nagar, HITEC City\ncity: Hyderabad\nstate: Telangana\nzipCode: 500081\ncountry: India\ndescription: Head Office\nactive: true\ncreatedAt: 4/4/2025, 9:28:32 pm\nupdatedAt: 4/4/2025, 9:28:32 pm\n\n2. name: Bangalore Office\naddress: 123 MG Road\ncity: Bangalore\nstate: Karnataka\nzipCode: 560001\ncountry: India\nactive: true\ncreatedAt: 6/6/2025, 12:02:52 am\nupdatedAt: 6/6/2025, 12:02:52 am\n\n","timestamp":"2025-06-05T18:33:26.158Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Here you go, Muni Sekhar! Hereâ€™s the list of all locations currently in the system:\n\n1. **Hyderabad**  \n   - **Address**: PHASE-2, N-Heights, Plot No 38, Siddiq Nagar, HITEC City  \n   - **City**: Hyderabad  \n   - **State**: Telangana  \n   - **ZIP Code**: 500081  \n   - **Country**: India  \n   - **Description**: Head Office  \n   - **Active**: Yes  \n   - **Created At**: 4/4/2025, 9:28:32 PM  \n   - **Updated At**: 4/4/2025, 9:28:32 PM  \n\n2. **Bangalore Office**  \n   - **Address**: 123 MG Road  \n   - **City**: Bangalore  \n   - **State**: Karnataka  \n   - **ZIP Code**: 560001  \n   - **Country**: India  \n   - **Active**: Yes  \n   - **Created At**: 6/6/2025, 12:02:52 AM  \n   - **Updated At**: 6/6/2025, 12:02:52 AM  \n\nDo you need to add more locations, update any details, or assign employees to these locations? Let me know how I can assist further! ðŸ˜Š","timestamp":"2025-06-05T18:33:31.052Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is holiday","timestamp":"2025-06-05T18:35:10.674Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-05T18:35:10.677Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:35:12.759Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"conversation\",\n  \"operation\": \"write\",\n  \"intent\": \"send_announcement\",\n  \"query\": {\n    \"data\": {\n      \"toAll\": false,\n      \"targetUser\": \"Aryu\",\n      \"message\": \"Tomorrow is holiday\"\n    }\n  }\n}","timestamp":"2025-06-05T18:35:15.556Z"}
{"level":"info","message":"Announcement intent detected","timestamp":"2025-06-05T18:35:16.834Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is holiday","timestamp":"2025-06-05T18:37:25.978Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T18:37:25.983Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:37:29.234Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"conversation\",\n  \"operation\": \"write\",\n  \"intent\": \"send_announcement\",\n  \"query\": {\n    \"data\": {\n      \"toAll\": false,\n      \"targetUser\": \"Aryu\",\n      \"message\": \"Tomorrow is holiday\"\n    }\n  }\n}","timestamp":"2025-06-05T18:37:31.891Z"}
{"level":"info","message":"Announcement intent detected","timestamp":"2025-06-05T18:37:34.638Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is holiday","timestamp":"2025-06-05T18:40:29.000Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T18:40:29.006Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:40:30.987Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"conversation\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"user\": \"67efab9372692e5936f97788\",\n      \"platform\": \"web\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Notify Aryu about tomorrow is holiday\"\n        }\n      ],\n      \"context\": {\n        \"intent\": \"send_announcement\",\n        \"parameters\": {\n          \"toAll\": false,\n          \"targetUser\": \"Aryu\",\n          \"message\": \"Tomorrow is holiday\"\n        }\n      },\n      \"active\": true,\n      \"lastActivity\": \"2025-06-05T00:00:00.000Z\"\n    }\n  },\n  \"intent\": \"send_announcement\"\n}","timestamp":"2025-06-05T18:40:34.914Z"}
{"level":"info","message":"Announcement intent detected","timestamp":"2025-06-05T18:40:37.608Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is holiday","timestamp":"2025-06-05T18:52:52.009Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T18:52:52.014Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:52:53.723Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"conversation\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"user\": \"67efab9372692e5936f97788\",\n      \"platform\": \"web\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Notify Aryu about tomorrow is holiday\"\n        }\n      ],\n      \"context\": {\n        \"intent\": \"send_announcement\",\n        \"parameters\": {\n          \"toAll\": false,\n          \"targetUser\": \"Aryu\",\n          \"message\": \"Tomorrow is holiday\"\n        }\n      },\n      \"active\": true,\n      \"lastActivity\": \"2025-06-05T00:00:00.000Z\"\n    }\n  }\n}","timestamp":"2025-06-05T18:52:58.727Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is holiday","timestamp":"2025-06-05T18:55:37.237Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T18:55:37.241Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T18:55:39.375Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"intent\": \"send_announcement\",\n  \"parameters\": {\n    \"toAll\": false,\n    \"targetUser\": \"Aryu\",\n    \"message\": \"Tomorrow is holiday\"\n  }\n}","timestamp":"2025-06-05T18:55:41.874Z"}
{"errors":[{"instancePath":"","keyword":"required","message":"must have required property 'model'","params":{"missingProperty":"model"},"schemaPath":"#/oneOf/0/required"},{"instancePath":"","keyword":"required","message":"must have required property 'unclear'","params":{"missingProperty":"unclear"},"schemaPath":"#/oneOf/1/required"},{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":null},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-05T18:56:01.919Z"}
{"level":"debug","message":"Attempt 2 to generate query","timestamp":"2025-06-05T18:56:08.848Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"intent\": \"send_announcement\",\n  \"parameters\": {\n    \"toAll\": false,\n    \"targetUser\": \"Aryu\",\n    \"message\": \"Tomorrow is holiday\"\n  }\n}","timestamp":"2025-06-05T18:56:10.535Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is holiday","timestamp":"2025-06-05T19:02:37.618Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-05T19:02:37.636Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-05T19:02:39.134Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"intent\": \"send_announcement\",\n  \"parameters\": {\n    \"toAll\": false,\n    \"targetUser\": \"Aryu\",\n    \"message\": \"Tomorrow is holiday\"\n  }\n}","timestamp":"2025-06-05T19:02:41.543Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is holiday","timestamp":"2025-06-06T04:48:22.827Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-06T04:48:22.841Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-06T04:48:31.564Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"conversation\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"user\": \"67efab9372692e5936f97788\",\n      \"platform\": \"web\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Notify Aryu about tomorrow is holiday\"\n        }\n      ],\n      \"context\": {\n        \"intent\": \"send_announcement\",\n        \"parameters\": {\n          \"toAll\": false,\n          \"targetUser\": \"Aryu\",\n          \"message\": \"Tomorrow is holiday\"\n        }\n      },\n      \"active\": true,\n      \"lastActivity\": \"2025-06-06T00:00:00.000Z\",\n      \"createdAt\": \"2025-06-06T00:00:00.000Z\",\n      \"updatedAt\": \"2025-06-06T00:00:00.000Z\"\n    }\n  },\n  \"intent\": \"send_announcement\"\n}","timestamp":"2025-06-06T04:48:36.451Z"}
{"level":"info","message":"Announcement intent detected","timestamp":"2025-06-06T04:49:01.312Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is sunday, so holiday","timestamp":"2025-06-06T04:57:53.710Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-06T04:57:53.715Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-06T04:57:56.414Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"intent\": \"send_announcement\",\n  \"parameters\": {\n    \"toAll\": false,\n    \"targetUser\": \"Aryu\",\n    \"message\": \"Tomorrow is Sunday, so holiday\"\n  }\n}","timestamp":"2025-06-06T04:58:00.290Z"}
{"level":"info","message":"Announcement intent detected","parameters":{"message":"Tomorrow is Sunday, so holiday","targetUser":"Aryu","toAll":false},"timestamp":"2025-06-06T04:58:17.302Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that their request couldnâ€™t be processed due to an internal error and suggest trying again or contacting an admin.","timestamp":"2025-06-06T05:00:15.679Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, it seems there was an internal error processing your request to notify Aryu. Could you try again? If the issue persists, I suggest reaching out to the admin team for assistance. Let me know if you'd like help with anything else!","timestamp":"2025-06-06T05:00:17.977Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is holiday","timestamp":"2025-06-06T05:00:54.973Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-06T05:00:54.976Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-06T05:00:56.226Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"intent\": \"send_announcement\",\n  \"parameters\": {\n    \"toAll\": false,\n    \"targetUser\": \"Aryu\",\n    \"message\": \"Tomorrow is holiday\"\n  }\n}","timestamp":"2025-06-06T05:00:59.757Z"}
{"level":"info","message":"Announcement intent detected","parameters":{"message":"Tomorrow is holiday","targetUser":"Aryu","toAll":false},"timestamp":"2025-06-06T05:01:01.651Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that their request couldnâ€™t be processed due to an internal error and suggest trying again or contacting an admin.","timestamp":"2025-06-06T05:02:27.866Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Muni Sekhar, your request to notify Aryu about tomorrow being a holiday couldn't be processed due to an internal error. Iâ€™d suggest trying again, or if the issue persists, contacting the admin team for support. Let me know if you need help with anything else!","timestamp":"2025-06-06T05:02:29.874Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is holiday","timestamp":"2025-06-06T05:06:24.716Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-06T05:06:24.718Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-06T05:06:27.846Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"conversation\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"user\": \"67efab9372692e5936f97788\",\n      \"platform\": \"web\",\n      \"messages\": [\n        {\n          \"role\": \"admin\",\n          \"content\": \"Notify Aryu about tomorrow is holiday\"\n        }\n      ],\n      \"context\": {\n        \"intent\": \"send_announcement\",\n        \"parameters\": {\n          \"toAll\": false,\n          \"targetUser\": \"Aryu\",\n          \"message\": \"Tomorrow is holiday\"\n        }\n      },\n      \"active\": true,\n      \"lastActivity\": \"2025-06-06T00:00:00.000Z\",\n      \"createdAt\": \"2025-06-06T00:00:00.000Z\",\n      \"updatedAt\": \"2025-06-06T00:00:00.000Z\"\n    }\n  },\n  \"intent\": \"send_announcement\",\n  \"parameters\": {\n    \"toAll\": false,\n    \"targetUser\": \"Aryu\",\n    \"message\": \"Tomorrow is holiday\"\n  }\n}","timestamp":"2025-06-06T05:06:32.557Z"}
{"errors":[{"instancePath":"","keyword":"oneOf","message":"must match exactly one schema in oneOf","params":{"passingSchemas":[0,1]},"schemaPath":"#/oneOf"}],"level":"warn","message":"Invalid JSON schema","timestamp":"2025-06-06T05:06:47.371Z"}
{"level":"debug","message":"Attempt 2 to generate query","timestamp":"2025-06-06T05:07:18.597Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"model\": \"conversation\",\n  \"operation\": \"write\",\n  \"query\": {\n    \"data\": {\n      \"user\": \"67efab9372692e5936f97788\",\n      \"platform\": \"web\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Notification sent to Aryu: Tomorrow is holiday\"\n        }\n      ],\n      \"active\": true,\n      \"lastActivity\": \"2025-06-06T00:00:00.000Z\",\n      \"createdAt\": \"2025-06-06T00:00:00.000Z\",\n      \"updatedAt\": \"2025-06-06T00:00:00.000Z\"\n    }\n  },\n  \"intent\": \"send_announcement\",\n  \"parameters\": {\n    \"toAll\": false,\n    \"targetUser\": \"Aryu\",\n    \"message\": \"Tomorrow is holiday\"\n  }\n}","timestamp":"2025-06-06T05:07:21.717Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is sunday, so holiday","timestamp":"2025-06-06T05:10:08.530Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-06T05:10:08.535Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-06T05:10:14.514Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"intent\": \"send_announcement\",\n  \"parameters\": {\n    \"toAll\": false,\n    \"targetUser\": \"Aryu\",\n    \"message\": \"Tomorrow is Sunday, so holiday\"\n  }\n}","timestamp":"2025-06-06T05:10:17.059Z"}
{"level":"info","message":"Announcement intent detected","parameters":{"message":"Tomorrow is Sunday, so holiday","targetUser":"Aryu","toAll":false},"timestamp":"2025-06-06T05:10:29.012Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is sunday, so holiday","timestamp":"2025-06-06T05:13:19.276Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-06T05:13:19.281Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-06T05:13:20.850Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"intent\": \"send_announcement\",\n  \"parameters\": {\n    \"toAll\": false,\n    \"targetUser\": \"Aryu\",\n    \"message\": \"Tomorrow is Sunday, so holiday\"\n  }\n}","timestamp":"2025-06-06T05:13:23.794Z"}
{"level":"info","message":"Announcement intent detected","parameters":{"message":"Tomorrow is Sunday, so holiday","targetUser":"Aryu","toAll":false},"timestamp":"2025-06-06T05:13:31.551Z"}
{"level":"debug","message":"Processing with Azure OpenAI Tell Muni Sekhar that their request couldnâ€™t be processed due to an internal error and suggest trying again or contacting an admin.","timestamp":"2025-06-06T05:13:34.313Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Azure OpenAI response received","result":"Hi Muni Sekhar, it seems there was an internal error processing your request to notify Aryu. I suggest trying again or reaching out to the admin for assistance. Let me know if you'd like me to guide you further!","timestamp":"2025-06-06T05:13:36.851Z"}
{"level":"debug","message":"Generating MongoDB query Notify Aryu about tomorrow is sunday, so holiday","timestamp":"2025-06-06T05:17:19.675Z","userId":"67efab9372692e5936f97788"}
{"level":"info","message":"Schemas simplified and cached","timestamp":"2025-06-06T05:17:19.679Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-06T05:17:21.199Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"intent\": \"send_announcement\",\n  \"parameters\": {\n    \"toAll\": false,\n    \"targetUser\": \"Aryu\",\n    \"message\": \"Tomorrow is Sunday, so holiday\"\n  }\n}","timestamp":"2025-06-06T05:17:23.627Z"}
{"level":"info","message":"Announcement intent detected","parameters":{"message":"Tomorrow is Sunday, so holiday","targetUser":"Aryu","toAll":false},"timestamp":"2025-06-06T05:17:27.739Z"}
{"level":"debug","message":"Generating MongoDB query send message to aryu, Good Morning CEO","timestamp":"2025-06-06T05:19:05.444Z","userId":"67efab9372692e5936f97788"}
{"level":"debug","message":"Using cached schemas","timestamp":"2025-06-06T05:19:05.447Z"}
{"level":"debug","message":"Attempt 1 to generate query","timestamp":"2025-06-06T05:19:08.345Z"}
{"level":"debug","message":"Raw Azure OpenAI response","rawContent":"{\n  \"intent\": \"send_announcement\",\n  \"parameters\": {\n    \"toAll\": false,\n    \"targetUser\": \"Aryu\",\n    \"message\": \"Good Morning CEO\"\n  }\n}","timestamp":"2025-06-06T05:19:11.118Z"}
{"level":"info","message":"Announcement intent detected","parameters":{"message":"Good Morning CEO","targetUser":"Aryu","toAll":false},"timestamp":"2025-06-06T05:19:19.650Z"}
